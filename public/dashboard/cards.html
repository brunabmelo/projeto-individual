<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/favicon2.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Eevee | Cuidados</title>


    <link rel="stylesheet" href="./../css/dashboards.css">

    <script src="../js/sessao.js"></script>
    <script src="../js/alerta.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
</head>

<!--<body onload="validarSessao(),  atualizacaoPeriodica()">-->

<!--MENU SITE-->
<div class="janela">

    <div class="header-left dash-header">
        <!--icone clicavel -->
        <a href="./cards.html">
            <img src="../assets/logo/iconLogo-1.png" class="logo">
        </a>

        <div class="hello">
            <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
        </div>

        <div class="btn-nav">
            <h3>Meu Eevee</h3>
        </div>

        <div class="btn-nav-white">
            <a href="./dashboareevee.html">
                <h3>Gráficos</h3>
            </a>
        </div>

        <div class="btn-nav-white">
            <a href="./perfil.html">
                <h3>Perfil</h3>
            </a>
        </div>

        <div class="btn-logout" onclick="limparSessao()">
            <h3>Sair</h3>
        </div>

    </div>
    <!--FINAL MENU -->

    <!--BARRA XP -->
    <div class="dash">
        <div class="barra-de-progresso">
            <p class="titulo-legenda">
                XP - Progresso de felicidade para evoluir seu Eevee
            </p>

            <div id="barraxp" class="outer">
                <div id="progress" class="inner" style="width: 0px;"></div>

            </div>
        </div>

        <div id="pet">
            <img src="../assets/pet/Eevee-normal.png">
        </div>

        <div class="interacao">
            <button class="botao" onclick="Comida()">Comida</button>
            <button class="botao" onclick="Agua()">Água</button>
            <button class="botao" onclick="Carinho()">Carinho</button>
        </div>
        <div id="msg"></div>

    </div>


    </body>

    <script>
        b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
        var barracor = document.getElementById("barraxp");
        var progresscontagem = document.getElementById("progress");
        var nivel = progresscontagem.clientWidth;
        var comida = 0;
        var agua = 0;
        var carinho = 0;

        // AÇÃO COMIDA
        function Comida() {
            if (progresscontagem.clientWidth >= barracor.clientWidth) {
                evolucao();
            } else {

                pet.innerHTML = `<img src="../assets/pet/Eevee-feliz.png">`
                setTimeout(function () { pet.innerHTML = `<img src="../assets/pet/Eevee-normal.png">` }, 1000);

                progresscontagem.style.width = progresscontagem.offsetWidth + 30 + "px";
                comida++;

                function atualizar() {
                    nivel = progresscontagem.clientWidth;
                    msg.innerHTML = nivel
                }
                atualizar()
            }

        }
        

        // AÇÃO ÁGUA    
        function Agua() {
            if (progresscontagem.clientWidth >= barracor.clientWidth) {
                evolucao();
            } else {
                pet.innerHTML = `<img src="../assets/pet/Eevee-feliz.png">`
                setTimeout(function () { pet.innerHTML = `<img src="../assets/pet/Eevee-normal.png">` }, 1000);

                progresscontagem.style.width = progresscontagem.offsetWidth + 30 + "px";
                agua++;

                function atualizar() {
                    nivel = progresscontagem.clientWidth;
                    msg.innerHTML = nivel
                }
                atualizar()
            }
        }

        // AÇÃO CARINHO
        function Carinho() {
            if (progresscontagem.clientWidth >= barracor.clientWidth) {

                evolucao();
            } else {
                pet.innerHTML = `<img src="../assets/pet/Eevee-feliz.png">`
                setTimeout(function () { pet.innerHTML = `<img src="../assets/pet/Eevee-normal.png">` }, 1000);

                progresscontagem.style.width = progresscontagem.offsetWidth + 30 + "px";
                carinho++;

                function atualizar() {
                    nivel = progresscontagem.clientWidth;
                    msg.innerHTML = nivel
                }
                atualizar()
            }
        }
        // EVOLUÇÃO
        function evolucao() {

            if (comida > agua && comida > carinho) {
                pet.innerHTML = `<img src="../assets/logo/iconLogo-2.png">`
            }
            else if (agua > comida && agua > carinho) {
                pet.innerHTML = `<img src="../assets/logo/iconLogo-4.png">`
            }
            else if (carinho > comida && carinho > agua) {

                pet.innerHTML = `<img src="../assets/logo/iconLogo-3.png">`
            }
        }

    
    </script>

</html>